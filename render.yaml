services:
  - type: web
    name: toot-pizza-web
    region: ohio
    env: docker
    plan: starter
    domains:
      - toot.pizza
    repo: https://github.com/irubnich/toot-pizza.git
    branch: render
    pullRequestPreviewsEnabled: true
    dockerfilePath: ./deploy/Dockerfile.nginx
    dockerContext: ./deploy
    numInstances: 1
    healthCheckPath: /health
  - type: pserv
    name: toot-pizza-rails
    region: ohio
    env: docker
    plan: standard
    repo: https://github.com/irubnich/toot-pizza.git
    branch: render
    pullRequestPreviewsEnabled: true
    dockerfilePath: ./deploy/Dockerfile.web
    dockerContext: ./deploy
    numInstances: 1
    healthCheckPath: /health
    envVars:
      - fromGroup: toot-pizza
      - key: PORT
        value: 3000
  - type: pserv
    name: toot-pizza-workers
    region: ohio
    env: docker
    plan: starter
    repo: https://github.com/irubnich/toot-pizza.git
    branch: render
    pullRequestPreviewsEnabled: true
    dockerfilePath: ./deploy/Dockerfile.workers
    dockerContext: ./deploy
    numInstances: 1
    healthCheckPath: /api/v1/streaming/health
    envVars:
      - fromGroup: toot-pizza
      - key: PORT
        value: 4000
